import path_following
from wave import Wave
import pygame.display
from vector import *
import math
from pygame.image import load as image_load

class Stage_data:
	def __init__(self):
		self.waves = []
		self.paths = []
		self.background = ""
		self.starting_money = 0
		self.starting_lives = 0
		self.cant_routes = 0
		self.tower_placements = []
		self.timers = []
		self.music = None
		self.entry_points = []
		self.bases_pos = []
		self.wave_files = []
	def add_path(self,path, offset_module = 20):
		path_object = path_following.Path([])
		for node in path:
			path_object.add_node(node)
		self.paths.append(path_object.new_translated_path(20))
		self.paths.append(path_object)
		self.paths.append(path_object.new_translated_path(-20))
		self.cant_routes += 3
	def add_wave(self,wave_file,recover = False):
		if not recover:
			self.wave_files.append(wave_file)
		wave_ = Wave(self.cant_routes)
		wave_.load_from_file(wave_file)
		self.waves.append(wave_)
	def set_background(self,background):
		self.background = background
	def set_starting_money(self,money):
		self.starting_money = money
	def set_starting_lives(self,lives):
		self.starting_lives = lives
	def set_tower_placements(self,placements):
		for i in placements:
			self.tower_placements.append(Vec2D(i[0],i[1]))
	def set_timers(self,timers):
		self.timers = timers
	def set_music(self,music):
		self.music = music
	def set_entry_points(self,points):
		for i in points:
			self.entry_points.append(Vec2D(i[0],i[1]))
	def set_base(self,bases_pos):
		for i in bases_pos:
			self.bases_pos.append(Vec2D(i[0],i[1]))

#####################################33
path1 = ((3, 107),(34, 105),(64, 108),(95, 107),(116, 109),(139, 113),(159, 113),(178, 120),(186, 137),(188, 155),(190, 195),(188, 252),(188, 290),(189, 321),(186, 347),(187, 363),(192, 377),(202, 397),(210, 409),(220, 424),(241, 429),(267, 429),(294, 429),(306, 428),(326, 421),(336, 406),(338, 388),(338, 373),(339, 355),(339, 333),(339, 312),(339, 295),(339, 275),(342, 257),(344, 238),(344, 208),(351, 193),(355, 162),(352, 147),(354, 134),(364, 118),(386, 109),(409, 102),(428, 103),(452, 104),(471, 107),(496, 114),(506, 131),(508, 156),(506, 188),(505, 211),(506, 231),(509, 256),(507, 284),(507, 312),(509, 339),(510, 369),(521, 396),(535, 413),(545, 422),(567, 424),(597, 428),(614, 426),(629, 421),(638, 415),(649, 404),(656, 395),(658, 384),(660, 363),(661, 341),(661, 318),(668, 155),(672, 144),(675, 136),(681, 129),(688, 123),(697, 117),(706, 112),(715, 108),(729, 104),(746, 104),(768, 101),(786, 105),(806, 106),(821, 112),(826, 125),(830, 144),(833, 166),(832, 233),(832, 338),(832, 361),(833, 378),(838, 390),(847, 400),(857, 406),(866, 409),(878, 412),(887, 413),(904, 416),(918, 418),(930, 419),(940, 419),(947, 419),(953, 419))
placements1 = [(271, 245), (266, 343), (267, 161), (430, 183), (427, 285), (399, 449), (458, 447), (587, 344), (584, 492), (710, 456), (780, 445), (749, 306), (745, 189), (586, 112), (435, 30), (106, 189), (136, 447), (120, 293), (905, 101), (927, 351)]
one_stage_data = Stage_data()
one_stage_data.add_path(path1)
one_stage_data.add_wave("waves/wave_file1-1.txt")
one_stage_data.add_wave("waves/wave_file1-2.txt")
one_stage_data.set_background("graphics/mapa_1.png")
one_stage_data.set_tower_placements(placements1)
one_stage_data.set_starting_money(200)
one_stage_data.set_starting_lives(10)
one_stage_data.set_timers([30,0])
one_stage_data.set_music("sounds/theme1.ogg")
one_stage_data.set_entry_points([(921, 422)])
one_stage_data.set_base([(27, 109)])
############################################
path2_1 = ((1, 532),(11, 522),(27, 508),(37, 495),(51, 485),(66, 469),(80, 453),(90, 438),(99, 426),(108, 415),(122, 401),(135, 387),(148, 378),(160, 368),(171, 355),(185, 338),(198, 325),(210, 310),(221, 299),(236, 288),(249, 281),(264, 280),(281, 283),(296, 287),(307, 289),(320, 296),(330, 304),(340, 312),(349, 320),(357, 328),(367, 337),(380, 347),(390, 355),(402, 368),(415, 379),(425, 388),(439, 391),(453, 392),(465, 392),(486, 392),(508, 394),(526, 395),(542, 390),(551, 378),(560, 364),(571, 350),(580, 337),(589, 325),(598, 310),(606, 300),(614, 286),(622, 270),(629, 262),(635, 254),(642, 246),(655, 242),(666, 238),(677, 236),(689, 235),(702, 235),(713, 234),(724, 233),(735, 234),(743, 240),(752, 250),(759, 257),(765, 267),(774, 276),(782, 288),(788, 302),(796, 314),(805, 321),(815, 326),(828, 327),(842, 328),(860, 329),(877, 330),(892, 331),(913, 332),(927, 331),(953, 329),(957, 333))
path2_2 = ((150, 3),(149, 12),(148, 20),(146, 32),(147, 44),(147, 61),(147, 78),(147, 109),(149, 135),(149, 156),(147, 171),(147, 188),(148, 207),(158, 218),(167, 233),(176, 241),(185, 250),(194, 263),(202, 276),(212, 284),(224, 288),(235, 288),(252, 284),(265, 281),(282, 283),(298, 286),(309, 294),(321, 299),(330, 305),(343, 316),(353, 327),(363, 336),(377, 347),(392, 359),(403, 369),(416, 379),(427, 387),(441, 394),(458, 395),(473, 396),(487, 397),(502, 395),(519, 394),(534, 393),(545, 384),(552, 375),(559, 364),(569, 349),(580, 340),(586, 330),(593, 321),(601, 310),(610, 300),(618, 288),(625, 278),(632, 266),(641, 258),(650, 249),(660, 241),(674, 238),(690, 236),(700, 236),(712, 236),(722, 238),(733, 241),(746, 244),(758, 258),(765, 267),(773, 276),(781, 289),(792, 303),(797, 314),(803, 322),(815, 323),(826, 323),(842, 324),(856, 326),(866, 326),(879, 326),(890, 326),(907, 326),(924, 326),(937, 326),(955, 327))
placements2 = [(104, 287), (255, 186), (236, 68), (62, 47), (60, 153), (279, 365), (218, 421), (157, 487), (472, 320), (424, 462), (539, 465), (700, 311), (647, 384), (562, 235), (691, 165), (857, 255), (816, 408), (919, 405)]
second_stage_data = Stage_data()
second_stage_data.add_path(path2_1)
second_stage_data.add_path(path2_2)
second_stage_data.add_wave("waves/wave_file2-1.txt")
second_stage_data.add_wave("waves/wave_file2-2.txt")
second_stage_data.set_background("graphics/mapa_2.png")
second_stage_data.set_tower_placements(placements2)
second_stage_data.set_starting_money(400)
second_stage_data.set_starting_lives(15)
second_stage_data.set_timers([40,0])
second_stage_data.set_music("sounds/theme2.ogg")
second_stage_data.set_entry_points([(149, 20), (14, 517)])
second_stage_data.set_base([(940, 333)])
###############################3
path3_1 = ((3, 406),(11, 405),(30, 402),(49, 399),(65, 398),(85, 398),(106, 399),(122, 400),(144, 397),(161, 395),(179, 392),(213, 388),(241, 387),(285, 383),(312, 379),(337, 375),(354, 373),(378, 368),(408, 360),(428, 354),(443, 349),(463, 346),(481, 341),(494, 339),(509, 337),(519, 335),(533, 333),(549, 330),(567, 330),(588, 327),(604, 324),(619, 322),(632, 320),(645, 319),(658, 319),(675, 319),(686, 321),(695, 325),(705, 333),(720, 343),(727, 353),(740, 366),(748, 377),(757, 385),(766, 397),(776, 407),(791, 418),(802, 432),(808, 444),(813, 452),(822, 460),(830, 466),(834, 476),(836, 488),(837, 500),(837, 514),(838, 525),(838, 534),(838, 538))
path3_2 = ((444, 1),(444, 11),(443, 20),(442, 34),(441, 45),(441, 57),(440, 71),(436, 80),(428, 93),(420, 103),(412, 112),(404, 121),(396, 131),(388, 140),(380, 147),(372, 155),(364, 165),(360, 176),(357, 185),(352, 195),(354, 204),(358, 212),(363, 220),(369, 233),(379, 249),(390, 269),(397, 283),(402, 296),(412, 312),(417, 324),(424, 334),(431, 341),(442, 343),(454, 343),(465, 338),(476, 336),(491, 334),(507, 330),(527, 329),(546, 326),(563, 326),(587, 325),(601, 324),(617, 320),(628, 318),(641, 311),(657, 311),(672, 314),(690, 325),(703, 338),(717, 349),(734, 363),(749, 385),(766, 403),(782, 416),(796, 430),(808, 450),(816, 465),(821, 477),(823, 489),(824, 501),(825, 512),(825, 523),(826, 534),(826, 539))
path3_3 = ((839, 2),(841, 18),(840, 45),(840, 64),(840, 81),(840, 97),(840, 111),(838, 121),(832, 131),(824, 141),(806, 166),(791, 186),(763, 213),(746, 232),(730, 251),(711, 270),(700, 282),(694, 290),(692, 301),(693, 314),(699, 324),(709, 333),(718, 347),(725, 359),(733, 370),(744, 382),(754, 393),(764, 405),(774, 415),(782, 427),(795, 438),(807, 445),(815, 459),(820, 472),(824, 485),(827, 500),(826, 513),(828, 526),(828, 535))
placements3 = [(297, 302), (77, 325), (191, 314), (134, 466), (315, 452), (496, 416), (639, 388), (800, 317), (492, 260), (447, 191), (349, 54), (275, 200), (520, 66), (866, 242), (751, 90), (669, 189)]
third_stage_data = Stage_data()
third_stage_data.add_path(path3_1)
third_stage_data.add_path(path3_2)
third_stage_data.add_path(path3_3)
third_stage_data.add_wave("waves/wave_file3-1.txt")
third_stage_data.add_wave("waves/wave_file3-2.txt")
third_stage_data.add_wave("waves/wave_file3-3.txt")
third_stage_data.set_background("graphics/mapa_3.png")
third_stage_data.set_tower_placements(placements3)
third_stage_data.set_starting_money(500)
third_stage_data.set_starting_lives(15)
third_stage_data.set_music("sounds/theme3.ogg")
third_stage_data.set_entry_points([(29, 459), (391, 10), (784, 14)])
third_stage_data.set_base([(649,519)])
third_stage_data.set_timers([40,40,0])
#######################################3
path4_1 = ((1, 296),(13, 290),(27, 280),(42, 269),(56, 262),(70, 254),(84, 247),(97, 242),(109, 239),(127, 237),(143, 237),(159, 240),(175, 247),(194, 251),(207, 254),(220, 259),(235, 262),(248, 264),(258, 270),(273, 274),(287, 281),(307, 286),(329, 297),(346, 305),(371, 310),(392, 308),(408, 298),(423, 285),(439, 272),(449, 262),(463, 255),(475, 246),(488, 233),(498, 224),(513, 213),(530, 198),(544, 184),(561, 171),(573, 161),(582, 148),(593, 141),(608, 137),(629, 138),(649, 135),(661, 135),(678, 139),(685, 146),(694, 163),(702, 184),(712, 208),(731, 256),(759, 313),(793, 391),(828, 459),(861, 537))
path4_2 = ((435, 537),(428, 526),(422, 510),(412, 490),(401, 469),(385, 439),(372, 410),(363, 384),(362, 363),(363, 341),(367, 325),(371, 310),(382, 301),(394, 293),(408, 292),(425, 290),(439, 278),(451, 266),(464, 253),(473, 239),(518, 195),(556, 154),(572, 146),(587, 141),(606, 138),(633, 137),(654, 137),(671, 140),(682, 155),(692, 170),(702, 195),(714, 228),(748, 292),(789, 377),(818, 442),(848, 507),(863, 538))
path4_3 = ((954, 37),(929, 47),(870, 76),(737, 135),(710, 142),(701, 148),(699, 154),(699, 165),(698, 180),(705, 196),(716, 226),(754, 314),(792, 395),(862, 537))
placements4 = [(121, 325), (273, 367), (387, 214), (447, 383), (522, 316), (615, 216), (484, 122), (150, 148), (644, 58), (715, 62), (808, 207), (895, 162), (857, 329), (711, 405), (756, 505), (915, 460)]
fourth_stage_data = Stage_data()
fourth_stage_data.add_path(path4_1)
fourth_stage_data.add_path(path4_2)
fourth_stage_data.add_path(path4_3)
fourth_stage_data.add_wave("waves/wave_file4-1.txt")
fourth_stage_data.add_wave("waves/wave_file4-2.txt")
fourth_stage_data.add_wave("waves/wave_file4-3.txt")
fourth_stage_data.set_background("graphics/mapa_4.png")
fourth_stage_data.set_tower_placements(placements4)
fourth_stage_data.set_starting_money(600)
fourth_stage_data.set_starting_lives(15)
fourth_stage_data.set_music("sounds/theme3.ogg")
fourth_stage_data.set_entry_points([(14, 288), (431, 532), (954, 35)])
fourth_stage_data.set_base([(866, 539)])
fourth_stage_data.set_timers([40,30,0])
#########################################3
path5_1 = ((0, 9),(22, 51),(32, 77),(53, 128),(67, 158),(72, 173),(83, 193),(95, 204),(104, 222),(122, 243),(134, 260),(153, 276),(171, 292),(185, 299),(215, 302),(273, 303),(327, 304),(381, 300),(405, 300),(422, 297),(429, 297),(440, 299),(449, 305),(453, 319),(459, 339),(462, 360),(464, 455),(463, 536))
path5_2 = ((458, 8),(454, 84),(456, 167),(461, 230),(461, 276),(460, 313),(463, 352),(465, 398),(468, 434),(465, 474),(465, 538))
path5_3 = ((955, 3),(930, 17),(912, 25),(899, 38),(893, 53),(886, 72),(883, 88),(877, 105),(868, 122),(863, 144),(854, 176),(846, 198),(836, 219),(827, 239),(816, 252),(806, 265),(794, 278),(779, 289),(755, 295),(734, 301),(719, 301),(659, 302),(584, 306),(520, 306),(494, 303),(479, 303),(470, 312),(468, 328),(469, 346),(469, 378),(468, 409),(465, 452),(463, 498),(464, 539))
placements5 = [(376, 213), (529, 219), (538, 382), (388, 381), (25, 251), (109, 41), (114, 346), (232, 378), (190, 190), (678, 374), (768, 176), (818, 41), (876, 306), (532, 499), (387, 497), (525, 84), (381, 87)]
fifth_stage_data = Stage_data()
fifth_stage_data.add_path(path5_1)
fifth_stage_data.add_path(path5_2)
fifth_stage_data.add_path(path5_3)
fifth_stage_data.add_wave("waves/wave_file5-1.txt")
fifth_stage_data.add_wave("waves/wave_file5-2.txt")
fifth_stage_data.add_wave("waves/wave_file5-3.txt")
fifth_stage_data.add_wave("waves/wave_file5-4.txt")
fifth_stage_data.set_background("graphics/mapa_5.png")
fifth_stage_data.set_tower_placements(placements5)
fifth_stage_data.set_starting_money(750)
fifth_stage_data.set_starting_lives(20)
fifth_stage_data.set_music("sounds/theme3.ogg")
fifth_stage_data.set_entry_points([(7, 21), (454, 15), (949, 13)])
fifth_stage_data.set_base([(463, 526)])
fifth_stage_data.set_timers([30,30,20,0])


#########################################3
stage_list = (one_stage_data,second_stage_data,third_stage_data,fourth_stage_data,fifth_stage_data)
